<!doctype html><html lang=en dir=ltr><head><meta name=generator content="Hugo 0.101.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="简单博客"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://donnol.github.io/"><title>简单博客 | 我的简单博客</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.09a284f5a03730d86dde350d2c062b1514e48fdfebba7763941c0674ef65748f.css integrity="sha256-CaKE9aA3MNht3jUNLAYrFRTkj9/rundjlBwGdO9ldI8=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.631f908d75dbdb9edaa73454e067c75df0840436c02952151ea039f0be29de10.js integrity="sha256-Yx+QjXXb257apzRU4GfHXfCEBDbAKVIVHqA58L4p3hA=" crossorigin=anonymous></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PNRWGCH4KN"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PNRWGCH4KN",{anonymize_ip:!1})}</script><link rel=alternate type=application/rss+xml href=https://donnol.github.io/index.xml title=我的简单博客></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>我的简单博客</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-c8e9ae7896ddc3e931652e7edbcbefe2 class=toggle>
<label for=section-c8e9ae7896ddc3e931652e7edbcbefe2 class="flex justify-between"><a role=button>2022</a></label><ul><li><input type=checkbox id=section-3811be776c86ac852ad674f5dc19e532 class=toggle>
<label for=section-3811be776c86ac852ad674f5dc19e532 class="flex justify-between"><a role=button>07</a></label><ul><li><a href=https://donnol.github.io/posts/2022/07/jump_table/>Jump Table</a></li><li><a href=https://donnol.github.io/posts/2022/07/number_calculate/>数字计算之分摊</a></li></ul></li><li><input type=checkbox id=section-d9a952ec7a0fcb7a9ba717dc9bfce17b class=toggle>
<label for=section-d9a952ec7a0fcb7a9ba717dc9bfce17b class="flex justify-between"><a role=button>05</a></label><ul><li><a href=https://donnol.github.io/posts/2022/05/generic/>泛型</a></li><li><a href=https://donnol.github.io/posts/2022/05/find_go_version_the_app_use/>Find out which Go version built your binary</a></li><li><a href=https://donnol.github.io/posts/2022/05/k8s_how_to_keep_pods/>k8s是怎么维持pod的运行的呢？</a></li><li><a href=https://donnol.github.io/posts/2022/05/go_enum/>Go enum</a></li></ul></li><li><input type=checkbox id=section-98bace91040a47ec7d7a95076963fc62 class=toggle>
<label for=section-98bace91040a47ec7d7a95076963fc62 class="flex justify-between"><a role=button>04</a></label><ul><li><a href=https://donnol.github.io/posts/2022/04/go1.18_comparable/>Go1.18 comparable</a></li></ul></li><li><input type=checkbox id=section-821dedbe2a29b27962c9696b13382042 class=toggle>
<label for=section-821dedbe2a29b27962c9696b13382042 class="flex justify-between"><a role=button>03</a></label><ul><li><a href=https://donnol.github.io/posts/2022/03/kmp/>KMP</a></li></ul></li><li><input type=checkbox id=section-935ca4c1d23ab780a0809b4bc7c413bf class=toggle>
<label for=section-935ca4c1d23ab780a0809b4bc7c413bf class="flex justify-between"><a role=button>02</a></label><ul><li><a href=https://donnol.github.io/posts/2022/02/%E9%9C%9C%E4%B9%8B%E5%93%80%E4%BC%A4/>霜之哀伤</a></li><li><a href=https://donnol.github.io/posts/2022/02/goroutine_vs_tokio/>goroutine vs tokio</a></li><li><a href=https://donnol.github.io/posts/2022/02/go_runtime_chan/>go runtime chan</a></li><li><a href=https://donnol.github.io/posts/2022/02/go_work/>go work</a></li><li><a href=https://donnol.github.io/posts/2022/02/distractions/>杂念</a></li></ul></li><li><input type=checkbox id=section-a7c5705090b10b47e082065e722e7e5c class=toggle>
<label for=section-a7c5705090b10b47e082065e722e7e5c class="flex justify-between"><a role=button>01</a></label><ul><li><a href=https://donnol.github.io/posts/2022/01/rust_safe/>Rust与安全</a></li><li><a href=https://donnol.github.io/posts/2022/01/wasmtime/>wasm运行时wasmtime</a></li><li><a href=https://donnol.github.io/posts/2022/01/container_encrypt/>容器镜像加密</a></li><li><a href=https://donnol.github.io/posts/2022/01/smart_contract/>智能合约</a></li><li><a href=https://donnol.github.io/posts/2022/01/learn_go_fast/>Go快速入门</a></li><li><a href=https://donnol.github.io/posts/2022/01/consensus/>consensus</a></li><li><a href=https://donnol.github.io/posts/2022/01/red_black_tree/>红黑树</a></li><li><a href=https://donnol.github.io/posts/2022/01/rust_commonly_used_crate/>Rust常用库</a></li><li><a href=https://donnol.github.io/posts/2022/01/cache/>缓存和数据库如何保持一致</a></li></ul></li></ul></li><li><input type=checkbox id=section-71121fe02c394c786aa5fdaffc9e5412 class=toggle>
<label for=section-71121fe02c394c786aa5fdaffc9e5412 class="flex justify-between"><a role=button>2021</a></label><ul><li><input type=checkbox id=section-393d931b698132759df1a7089df0fcc8 class=toggle>
<label for=section-393d931b698132759df1a7089df0fcc8 class="flex justify-between"><a role=button>12</a></label><ul><li><a href=https://donnol.github.io/posts/2021/12/ebpf/>ebpf</a></li><li><a href=https://donnol.github.io/posts/2021/12/time_wenzi/>时间和文字</a></li><li><a href=https://donnol.github.io/posts/2021/12/etcd/>etcd</a></li><li><a href=https://donnol.github.io/posts/2021/12/vscode-go-module/>vscode-go在go.mod在非根目录情况下失效的问题</a></li><li><a href=https://donnol.github.io/posts/2021/12/mqtt/>mqtt</a></li><li><a href=https://donnol.github.io/posts/2021/12/redis_sds/>redis sds</a></li><li><a href=https://donnol.github.io/posts/2021/12/k8s/>k8s</a></li><li><a href=https://donnol.github.io/posts/2021/12/ddia/>数据密集型应用设计</a></li><li><a href=https://donnol.github.io/posts/2021/12/burn_cpu_use_golang/>burn cpu use golang</a></li><li><a href=https://donnol.github.io/posts/2021/12/docker_compose_extra_host/>docker compose使用extra host让容器访问主机服务</a></li><li><a href=https://donnol.github.io/posts/2021/12/dbeaver/>数据库管理工具之dbeaver</a></li><li><a href=https://donnol.github.io/posts/2021/12/domain/>Domain-oriented development</a></li><li><a href=https://donnol.github.io/posts/2021/12/github_action_deploy_hugo_blog/>github action deploy hugo blog</a></li></ul></li><li><input type=checkbox id=section-b59662e33ca9ad77b7d385cbee7785fe class=toggle>
<label for=section-b59662e33ca9ad77b7d385cbee7785fe class="flex justify-between"><a role=button>07</a></label><ul><li><a href=https://donnol.github.io/posts/2021/07/linux-epoll/>linux epoll</a></li></ul></li><li><input type=checkbox id=section-3b66512bb507cbdaa9cef9549f229fc1 class=toggle>
<label for=section-3b66512bb507cbdaa9cef9549f229fc1 class="flex justify-between"><a role=button>01</a></label><ul><li><a href=https://donnol.github.io/posts/2021/01/proxy-between-layer/>Go实现AOP</a></li><li><a href=https://donnol.github.io/posts/2021/01/hugo-blog/>hugo搭建博客</a></li><li><a href=https://donnol.github.io/posts/2021/01/pstree/>pstree进程树及说明</a></li></ul></li></ul></li><li><input type=checkbox id=section-6f89cc6c76d5375fc02e3f7e596280b9 class=toggle>
<label for=section-6f89cc6c76d5375fc02e3f7e596280b9 class="flex justify-between"><a role=button>2020</a></label><ul><li><input type=checkbox id=section-03db05476b76e7f4afe06dfa3e1b675b class=toggle>
<label for=section-03db05476b76e7f4afe06dfa3e1b675b class="flex justify-between"><a role=button>12</a></label><ul><li><a href=https://donnol.github.io/posts/2020/12/go-ctx/>go ctx</a></li></ul></li></ul></li><li><a href=https://donnol.github.io/posts/aboutme/about-me/>关于我</a></li></ul><ul><li><a href=https://github.com/donnol/blog target=_blank rel=noopener>Github</a></li><li><a href=https://themes.gohugo.io/hugo-book/ target=_blank rel=noopener>Hugo Themes</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>简单博客</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav><ul><li class=book-section-flat><strong>Categories</strong><ul><li class="flex justify-between"><a href=/categories/number/>number</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/structure/>structure</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/go/>go</a>
<span>11</span></li><li class="flex justify-between"><a href=/categories/typescript/>TypeScript</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/k8s/>k8s</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/algorithm/>algorithm</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/kmp/>KMP</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/frostmourne/>Frostmourne</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/goroutine/>goroutine</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/tokio/>tokio</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/chan/>chan</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/runtime/>runtime</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/distractions/>distractions</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/work/>work</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/rust/>rust</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/wasi/>wasi</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/wasm/>wasm</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/blockchain/>blockchain</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/container/>container</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/docker/>docker</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/image/>image</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/smart-contract/>smart contract</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/consensus/>consensus</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/red-black-tree/>red-black-tree</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/tree/>tree</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/cache/>cache</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/database/>database</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/linux/>linux</a>
<span>3</span></li><li class="flex justify-between"><a href=/categories/%E6%9D%82%E5%BF%B5/>杂念</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/etcd/>etcd</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/vscode-go/>vscode-go</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/message-queue/>message queue</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/redis/>redis</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/book/>book</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/dbmanager/>dbmanager</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/ddd/>ddd</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/blog/>blog</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/tools/>tools</a>
<span>1</span></li></ul></li><li class=book-section-flat><strong>Tags</strong><ul><li class="flex justify-between"><a href=/tags/calculate/>calculate</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/jump-table/>jump table</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/generic/>generic</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/version/>version</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pod/>pod</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/enum/>enum</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/comparable/>comparable</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/workspace/>workspace</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/concurrent/>concurrent</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/chan/>chan</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/safe/>safe</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/wasmtime/>wasmtime</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/encrypt/>encrypt</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/eth/>eth</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/evm/>evm</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/learn/>learn</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/deal/>deal</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/data-struct/>data-struct</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/crate/>crate</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/mysql/>mysql</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/redis/>redis</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ebpf/>ebpf</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%96%87%E5%AD%97/>文字</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%97%B6%E9%97%B4/>时间</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/gomod/>gomod</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/raft/>raft</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/mqtt/>mqtt</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/sds/>sds</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ddia/>ddia</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/k8s/>k8s</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/compose/>compose</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/cpu/>cpu</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/dbeaver/>dbeaver</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/domain/>domain</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/deploy/>deploy</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/epoll/>epoll</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/aop/>aop</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/hugo/>hugo</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/proxy/>proxy</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ctx/>ctx</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pstree/>pstree</a>
<span>1</span></li></ul></li></ul></nav></aside></header><article class="markdown book-post"><h2><a href=/posts/2021/12/burn_cpu_use_golang/>burn cpu use golang</a></h2><h5>December 9, 2021</h5><div><a href=/categories/go/>go</a></div><div><a href=/tags/cpu/>cpu</a></div><p>虚假的 burn # package main func fakeBurn() { for { } } 真正的 burn # package main import ( "flag" "fmt" "runtime" "time" ) var ( numBurn int updateInterval int ) func cpuBurn() { for { for i := 0; i &lt; 2147483647; i++ { } // Gosched yields the processor, allowing other goroutines to run. It does not suspend the current goroutine, so execution resumes automatically. // Gosched让当前goroutine让出处理器，从而使得其它goroutine可以运行。它不会挂起/暂停当前的goroutine，它会自动恢复执行。 runtime.
<a href=/posts/2021/12/burn_cpu_use_golang/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/2021/12/docker_compose_extra_host/>docker compose使用extra host让容器访问主机服务</a></h2><h5>December 9, 2021</h5><div><a href=/categories/docker/>docker</a></div><div><a href=/tags/compose/>compose</a></div><p>首发于：简单博客
docker compose 如何访问主机服务 # docker compose 里面的容器怎么访问主机自身起的服务呢？
20.10.0 版本在 linux 新增 host.docker.internal 支持： docker run -it --add-host=host.docker.internal:host-gateway alpine cat /etc/hosts
127.0.0.1 localhost ::1 localhost ip6-localhost ip6-loopback fe00::0 ip6-localnet ff00::0 ip6-mcastprefix ff02::1 ip6-allnodes ff02::2 ip6-allrouters 172.17.0.1 host.docker.internal # --add-host的作用就是添加了这行到/etc/hosts 172.17.0.3 cb0565ceea26 相关提交
这个 add-host 的意思是告诉容器，容器对域名 host.docker.internal 的访问都将转发到 host-gateway 去。
也就是容器内部访问这个域名 host.docker.internal 时，就会访问到对应的主机上的 host-gateway 地址。
从而达到容器访问主机上服务的效果。
那么，这个 add-host 怎么用在 compose 上呢？
在 build 里使用 extra_hosts
version: "2.3" # 因为某个bug的存在，只能用version2，不能用version3 services: tmp: build: context: .
<a href=/posts/2021/12/docker_compose_extra_host/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/2021/12/dbeaver/>数据库管理工具之dbeaver</a></h2><h5>December 9, 2021</h5><div><a href=/categories/dbmanager/>dbmanager</a></div><div><a href=/tags/dbeaver/>dbeaver</a></div><p>dbeaver: github
下载页
面向开发者、SQL 编程人员、数据库管理员和分析人员的免费的多平台数据库工具。 支持任何已有 JDBC 驱动的数据库（基本上是任何数据库）。商业版本还额外支持非 JDBC 数据源，比如：MongoDB, Cassandra, Couchbase, Redis, BigTable, DynamoDB 等。
拥有的特性：元数据编辑、SQL 编辑、富文本编辑、ER 图、数据导出/导入/转译、SQL 执行计划等。 基于 Eclipse 平台。 使用插件架构，为以下数据库提供额外功能：MySQL/MariaDB, PostgreSQL, Greenplum, Oracle, DB2 LUW, Exasol, SQL Server, Sybase/SAP ASE, SQLite, Firebird, H2, HSQLDB, Derby, Teradata, Vertica, Netezza, Informix 等。
Free multi-platform database tool for developers, SQL programmers, database administrators and analysts. Supports any database which has JDBC driver (which basically means - ANY database). Commercial versions also support non-JDBC datasources such as MongoDB, Cassandra, Couchbase, Redis, BigTable, DynamoDB, etc.
<a href=/posts/2021/12/dbeaver/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/2021/12/domain/>Domain-oriented development</a></h2><h5>December 8, 2021</h5><div><a href=/categories/ddd/>ddd</a></div><div><a href=/tags/domain/>domain</a></div><p>面向领域开发。
将业务复杂度和技术复杂度分开，逐个击破。
分离领域，各司其职。
降低复杂度，容易测试。
DDD 尝试 # order.go:
package domain import ( "crypto/rand" "math/big" "github.com/pkg/errors" ) // 关键词：用户、店铺、商品、订单 // // 场景描述：店铺展示商品，其价格为P、库存为N，用户（余额为Y）看到商品觉得合适，于是下单购买B个； // 购买前，用户余额Y必须不小于P，商品库存N不小于B；购买后，用户余额减少P，库存减少B； // // 先不考虑并发情况，建立此时的领域模型 type User struct { name string // 名称 phone string // 电话 balance Money // 余额 } type Shop struct { name string // 名称 addr string // 地址 } type Product struct { name string // 名称 price Money // 价格 stock int // 库存 ownShop *Shop // 所属商铺 } type Order struct { name string // 名称 user *User // 用户 product *Product // 商品 } type Money int func NewUser(name, phone string, bal Money) *User { return &User{ name: name, phone: phone, balance: bal, } } func (u *User) Balance() Money { return u.
<a href=/posts/2021/12/domain/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/aboutme/about-me/>关于我</a></h2><h5>December 7, 2021</h5><p>我自己 # 一名默默无闻的打工仔，做着后端开发里的一点微末工作。
当然怀抱着一夜暴富的乐观想法，希望每天平安快乐。
也对一些事情无比憎恶，时刻提醒自己适可宜止。
竟然也对各种球类运动感冒，偶尔踢出一片天地或抽出一道弧线。
我工作 # 专注于微服务、云原生、区块链领域，以快准稳著称，用想象力和创造力打造一片天地。
在计算、传输、存储方面略有心得，日复一日地析算法、理源码、画图文、成系统。</p></article><article class="markdown book-post"><h2><a href=/posts/2021/12/github_action_deploy_hugo_blog/>github action deploy hugo blog</a></h2><h5>December 2, 2021</h5><div><a href=/categories/blog/>blog</a></div><div><a href=/tags/deploy/>deploy</a></div><p>why # 为了将视线保持在文章上，减少构建和发布的时间占用。
what # github action是GitHub推出的持续集成/持续部署工具，只需要在项目中添加workflow.yml配置文件，在其中配置好任务、工作、步骤等，即可在指定动作发生时自动触发编排好的动作。换言之，如果我们在我们的博客仓库里配置了自动将内容打包和发布的workflow.yml，那我们就可以把精力集中在文章的编写，然后轻轻地提交推送，即可完成博客地打包和发布，very easy and smooth。
how # 在github准备一个blog仓库，用于存放原始信息；再准备一个github page仓库，用于存放打包数据。
其中github page仓库已开启page，可以通过github page设置的域名访问。
我的blog仓库
我的github page仓库
workflow # 这是我结合网络各位英豪所总结出来的一个workflow.yml配置文件
name: blog # 做什么都好，别忘了先起个平凡（kuxuan）的名字 on: # 指定触发动作 push: # 动作是：git push branches: - main # 指定分支： main jobs: build-deploy: runs-on: ubuntu-latest # 基于ubuntu steps: - uses: actions/checkout@v2 # 切换分支：git checkout with: submodules: recursive # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .
<a href=/posts/2021/12/github_action_deploy_hugo_blog/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/2021/07/linux-epoll/>linux epoll</a></h2><h5>July 17, 2021</h5><div><a href=/categories/linux/>linux</a></div><div><a href=/tags/epoll/>epoll</a></div><p>linux epoll # wiki
手册
why # what # Linux内核的可扩展I/O事件通知机制。
于Linux 2.5.44首度登场，它设计目的旨在取代既有POSIX select(2)与poll(2)系统函数，让需要大量操作文件描述符的程序得以发挥更优异的性能（举例来说：旧有的系统函数所花费的时间复杂度为O(n)，epoll的时间复杂度O(log n)）。epoll 实现的功能与 poll 类似，都是监听多个文件描述符上的事件。
how # epoll 通过使用红黑树(RB-tree)搜索被监控的文件描述符(file descriptor)。
在 epoll 实例上注册事件时，epoll 会将该事件添加到 epoll 实例的红黑树上并注册一个回调函数，当事件发生时会将事件添加到就绪链表中。
int epoll_create(int size); 在内核中创建epoll实例并返回一个epoll文件描述符。
int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event); 向 epfd 对应的内核epoll 实例添加、修改或删除对 fd 上事件 event 的监听。op 可以为 EPOLL_CTL_ADD, EPOLL_CTL_MOD, EPOLL_CTL_DEL 分别对应的是添加新的事件，修改文件描述符上监听的事件类型，从实例上删除一个事件。如果 event 的 events 属性设置了 EPOLLET flag，那么监听该事件的方式是边缘触发。
int epoll_wait(int epfd, struct epoll_event *events, int maxevents, int timeout); 当 timeout 为 0 时，epoll_wait 永远会立即返回。而 timeout 为 -1 时，epoll_wait 会一直阻塞直到任一已注册的事件变为就绪。当 timeout 为一正整数时，epoll 会阻塞直到计时 timeout 毫秒终了或已注册的事件变为就绪。因为内核调度延迟，阻塞的时间可能会略微超过 timeout 毫秒。
<a href=/posts/2021/07/linux-epoll/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/2021/01/proxy-between-layer/>Go实现AOP</a></h2><h5>January 17, 2021</h5><div><a href=/categories/go/>go</a></div><div><a href=/tags/aop/>aop</a>,
<a href=/tags/proxy/>proxy</a></div><p>Go实现AOP # 假设有store，从数据库获取数据，其中有方法IUserStore.GetByID，传入id参数，返回用户信息:
type IUserStore interface { GetByID(ctx context.Context, id int) (User, error) } 另外有service，刚好有用户id并且需要拿到用户信息，于是依赖了上述IUserStore：
type IUserSrv interface { CheckUser(ctx context.Context, id int) error // 获取用户信息，然后检查用户某些属性 } type userImpl struct { userStore IUserStore } func (impl userImpl) CheckUser(ctx context.Context, id int) error { user, err := impl.userStore.GetByID(ctx, id) if err != nil { return err } // 使用user数据做一些操作 _ = user } 上面所描述的是一个最简单的情况，如果我们要在userImpl.CheckUser里对impl.userStore.GetByID方法调用添加耗时统计，依然十分简单。
func (impl userImpl) CheckUser(ctx context.Context, id int) error { begin := time.
<a href=/posts/2021/01/proxy-between-layer/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/2021/01/hugo-blog/>hugo搭建博客</a></h2><h5>January 17, 2021</h5><div><a href=/categories/blog/>blog</a></div><div><a href=/tags/hugo/>hugo</a></div><p>操作 # 安装hugo。
使用hugo新建项目
添加主题
启动博客</p></article><article class="markdown book-post"><h2><a href=/posts/2020/12/go-ctx/>go ctx</a></h2><h5>December 18, 2020</h5><div><a href=/categories/go/>go</a></div><div><a href=/tags/ctx/>ctx</a></div><p>ctx # 1.why
goroutine号称百万之众，互相之间盘根错节，难以管理控制。为此，必须提供一种机制来管理控制它们。
各自为战 # package main import ( "fmt" "time" ) func main() { // start first go func() { fmt.Println(1) }() // start second go func() { fmt.Println(2) }() time.Sleep(time.Second) } 万法归一 # package main import ( "fmt" "sync" ) func main() { wg := new(sync.WaitGroup) // start first wg.Add(1) go func() { defer wg.Done() fmt.Println(1) }() // start second wg.Add(1) go func() { defer wg.Done() fmt.
<a href=/posts/2020/12/go-ctx/>...</a></p></article><ul class="pagination pagination-default"><li class=page-item><a href=/ aria-label=First class=page-link role=button><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/page/3/ aria-label=Previous class=page-link role=button><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a href=/ aria-label="Page 1" class=page-link role=button>1</a></li><li class=page-item><a href=/page/2/ aria-label="Page 2" class=page-link role=button>2</a></li><li class=page-item><a href=/page/3/ aria-label="Page 3" class=page-link role=button>3</a></li><li class="page-item active"><a aria-current=page aria-label="Page 4" class=page-link role=button>4</a></li><li class=page-item><a href=/page/5/ aria-label="Page 5" class=page-link role=button>5</a></li><li class=page-item><a href=/page/5/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/page/5/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav><ul><li class=book-section-flat><strong>Categories</strong><ul><li class="flex justify-between"><a href=/categories/number/>number</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/structure/>structure</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/go/>go</a>
<span>11</span></li><li class="flex justify-between"><a href=/categories/typescript/>TypeScript</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/k8s/>k8s</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/algorithm/>algorithm</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/kmp/>KMP</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/frostmourne/>Frostmourne</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/goroutine/>goroutine</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/tokio/>tokio</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/chan/>chan</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/runtime/>runtime</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/distractions/>distractions</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/work/>work</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/rust/>rust</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/wasi/>wasi</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/wasm/>wasm</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/blockchain/>blockchain</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/container/>container</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/docker/>docker</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/image/>image</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/smart-contract/>smart contract</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/consensus/>consensus</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/red-black-tree/>red-black-tree</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/tree/>tree</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/cache/>cache</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/database/>database</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/linux/>linux</a>
<span>3</span></li><li class="flex justify-between"><a href=/categories/%E6%9D%82%E5%BF%B5/>杂念</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/etcd/>etcd</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/vscode-go/>vscode-go</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/message-queue/>message queue</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/redis/>redis</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/book/>book</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/dbmanager/>dbmanager</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/ddd/>ddd</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/blog/>blog</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/tools/>tools</a>
<span>1</span></li></ul></li><li class=book-section-flat><strong>Tags</strong><ul><li class="flex justify-between"><a href=/tags/calculate/>calculate</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/jump-table/>jump table</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/generic/>generic</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/version/>version</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pod/>pod</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/enum/>enum</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/comparable/>comparable</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/workspace/>workspace</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/concurrent/>concurrent</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/chan/>chan</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/safe/>safe</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/wasmtime/>wasmtime</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/encrypt/>encrypt</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/eth/>eth</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/evm/>evm</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/learn/>learn</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/deal/>deal</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/data-struct/>data-struct</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/crate/>crate</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/mysql/>mysql</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/redis/>redis</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ebpf/>ebpf</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%96%87%E5%AD%97/>文字</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%97%B6%E9%97%B4/>时间</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/gomod/>gomod</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/raft/>raft</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/mqtt/>mqtt</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/sds/>sds</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ddia/>ddia</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/k8s/>k8s</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/compose/>compose</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/cpu/>cpu</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/dbeaver/>dbeaver</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/domain/>domain</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/deploy/>deploy</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/epoll/>epoll</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/aop/>aop</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/hugo/>hugo</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/proxy/>proxy</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ctx/>ctx</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pstree/>pstree</a>
<span>1</span></li></ul></li></ul></nav></div></aside></main></body></html>