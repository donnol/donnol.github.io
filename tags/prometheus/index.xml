<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Prometheus on 我的简单博客</title><link>https://donnol.github.io/tags/prometheus/</link><description>Recent content in Prometheus on 我的简单博客</description><generator>Hugo</generator><language>en</language><lastBuildDate>Thu, 06 Jul 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://donnol.github.io/tags/prometheus/index.xml" rel="self" type="application/rss+xml"/><item><title>Prometheus start failed</title><link>https://donnol.github.io/posts/2023/07/prometheus/</link><pubDate>Thu, 06 Jul 2023 00:00:00 +0000</pubDate><guid>https://donnol.github.io/posts/2023/07/prometheus/</guid><description>&lt;h2 id="question">
 Question
 &lt;a class="anchor" href="#question">#&lt;/a>
&lt;/h2>
&lt;p>prometheus start failed:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.871Z caller&lt;span style="color:#f92672">=&lt;/span>repair.go:57 level&lt;span style="color:#f92672">=&lt;/span>info component&lt;span style="color:#f92672">=&lt;/span>tsdb msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Found healthy block&amp;#34;&lt;/span> mint&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1688493607159&lt;/span> maxt&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1688515200000&lt;/span> ulid&lt;span style="color:#f92672">=&lt;/span>01H4J6TB6NCBZFNR9XZ1R2P67H
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.871Z caller&lt;span style="color:#f92672">=&lt;/span>repair.go:57 level&lt;span style="color:#f92672">=&lt;/span>info component&lt;span style="color:#f92672">=&lt;/span>tsdb msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Found healthy block&amp;#34;&lt;/span> mint&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1688529607159&lt;/span> maxt&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1688536800000&lt;/span> ulid&lt;span style="color:#f92672">=&lt;/span>01H4JDM4YR6J3TJVBY6P6EGZS4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>repair.go:57 level&lt;span style="color:#f92672">=&lt;/span>info component&lt;span style="color:#f92672">=&lt;/span>tsdb msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Found healthy block&amp;#34;&lt;/span> mint&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1688536807159&lt;/span> maxt&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1688544000000&lt;/span> ulid&lt;span style="color:#f92672">=&lt;/span>01H4JMFGKWY1MAM7GBFDQ89FRV
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>main.go:696 level&lt;span style="color:#f92672">=&lt;/span>info msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Stopping scrape discovery manager...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>main.go:710 level&lt;span style="color:#f92672">=&lt;/span>info msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Stopping notify discovery manager...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>main.go:732 level&lt;span style="color:#f92672">=&lt;/span>info msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Stopping scrape manager...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>manager.go:946 level&lt;span style="color:#f92672">=&lt;/span>info component&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;rule manager&amp;#34;&lt;/span> msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Stopping rule manager...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>manager.go:956 level&lt;span style="color:#f92672">=&lt;/span>info component&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;rule manager&amp;#34;&lt;/span> msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Rule manager stopped&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>notifier.go:601 level&lt;span style="color:#f92672">=&lt;/span>info component&lt;span style="color:#f92672">=&lt;/span>notifier msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Stopping notification manager...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>main.go:726 level&lt;span style="color:#f92672">=&lt;/span>info msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Scrape manager stopped&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>main.go:692 level&lt;span style="color:#f92672">=&lt;/span>info msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Scrape discovery manager stopped&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>main.go:907 level&lt;span style="color:#f92672">=&lt;/span>info msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Notifier manager stopped&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>main.go:706 level&lt;span style="color:#f92672">=&lt;/span>info msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Notify discovery manager stopped&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>tls_config.go:195 level&lt;span style="color:#f92672">=&lt;/span>info component&lt;span style="color:#f92672">=&lt;/span>web msg&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;TLS is disabled.&amp;#34;&lt;/span> http2&lt;span style="color:#f92672">=&lt;/span>false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ts&lt;span style="color:#f92672">=&lt;/span>2023-07-06T01:34:43.872Z caller&lt;span style="color:#f92672">=&lt;/span>main.go:916 level&lt;span style="color:#f92672">=&lt;/span>error err&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;opening storage failed: get segment range: segments are not sequential&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="answer">
 Answer
 &lt;a class="anchor" href="#answer">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>rm -rf /var/lib/prometheus/metrics2/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Path is from &lt;code>prometheus -h | grep '--storage.tsdb.path'&lt;/code>.&lt;/p></description></item></channel></rss>