<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  是什么？
  #


  Home, 
  Github

NATS 是一个简单、安全和高性能的通信系统，适用于数字系统、服务和设备。
NATS 是一种允许以消息形式分段的数据交换的基础架构。


  基于主题
  #

发布者将消息发到主题；订阅者订阅主题，在有消息到来时消费该消息。

主题命名规则：
基本字符：a to z, A to Z and 0 to 9 (区分大小写，不能包含空白字符).
特殊字符: . (分割符，分割不同部分，每部分视为一个token)； * 和 > (通配符，*表示匹配一个token，>表示匹配一或多个token).
保留主题名称: 以 $ 开头的用在系统内部 (如：$SYS, $JS, $KV &mldr;)"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://donnol.github.io/posts/2023/04/nats/"><meta property="og:site_name" content="我的简单博客"><meta property="og:title" content="NATS"><meta property="og:description" content=" 是什么？ # Home, Github
NATS 是一个简单、安全和高性能的通信系统，适用于数字系统、服务和设备。
NATS 是一种允许以消息形式分段的数据交换的基础架构。
基于主题 # 发布者将消息发到主题；订阅者订阅主题，在有消息到来时消费该消息。
主题命名规则：
基本字符：a to z, A to Z and 0 to 9 (区分大小写，不能包含空白字符).
特殊字符: . (分割符，分割不同部分，每部分视为一个token)； * 和 > (通配符，*表示匹配一个token，>表示匹配一或多个token).
保留主题名称: 以 $ 开头的用在系统内部 (如：$SYS, $JS, $KV …)"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-04-24T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-24T00:00:00+00:00"><meta property="article:tag" content="NATS"><title>NATS | 我的简单博客</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.95d69eb6bad8b9707ff2b5d8d9e31ce70a1b84f2ed7ffaf665ffcf00aa7993bd.css integrity="sha256-ldaetrrYuXB/8rXY2eMc5wobhPLtf/r2Zf/PAKp5k70=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.80d79a9fb457b8ee2d49763f4bbec466aff4c7ec384ae54c08c18c6f069d70a5.js integrity="sha256-gNean7RXuO4tSXY/S77EZq/0x+w4SuVMCMGMbwadcKU=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-PNRWGCH4KN"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PNRWGCH4KN")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>我的简单博客</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-88902446d608163b7be46632cb6bef72 class=toggle checked>
<label for=section-88902446d608163b7be46632cb6bef72 class="flex justify-between"><a role=button>2023</a></label><ul><li><input type=checkbox id=section-67c01fa78e6544e45d86cfb839555dd3 class=toggle>
<label for=section-67c01fa78e6544e45d86cfb839555dd3 class="flex justify-between"><a role=button>12</a></label><ul><li><a href=https://donnol.github.io/posts/2023/12/dbeaver%E6%89%8B%E5%8A%A8%E5%AF%BC%E5%85%A5%E9%A9%B1%E5%8A%A8/>dbeaver手动导入驱动</a></li><li><a href=https://donnol.github.io/posts/2023/12/do/>Do</a></li><li><a href=https://donnol.github.io/posts/2023/12/%E5%8F%8C%E6%A0%87/>双标</a></li><li><a href=https://donnol.github.io/posts/2023/12/%E5%8F%96%E4%B8%8E%E4%BA%A4/>取与交</a></li><li><a href=https://donnol.github.io/posts/2023/12/%E6%83%85%E6%99%AF/>情景</a></li><li><a href=https://donnol.github.io/posts/2023/12/%E6%9A%96%E5%BA%8A%E5%92%8C%E6%B3%A1%E6%B5%B4%E7%BC%B8/>暖床和泡浴缸</a></li><li><a href=https://donnol.github.io/posts/2023/12/%E6%9C%AA%E6%9D%A5/>未来</a></li><li><a href=https://donnol.github.io/posts/2023/12/%E8%A7%84%E7%9F%A9%E7%9A%84%E8%AE%A2%E7%AB%8B%E5%92%8C%E6%89%A7%E8%A1%8C/>规矩的订立和执行</a></li><li><a href=https://donnol.github.io/posts/2023/12/%E9%A9%B1%E8%99%8E%E5%90%9E%E7%8B%BC/>驱虎吞狼</a></li></ul></li><li><input type=checkbox id=section-e5e00708106809cefc1b0939618449f5 class=toggle>
<label for=section-e5e00708106809cefc1b0939618449f5 class="flex justify-between"><a role=button>10</a></label><ul><li><a href=https://donnol.github.io/posts/2023/10/mysql_count_distinct_with_over/>Mysql 8.0.33在使用窗口函数的同时不能用count(distinct *)</a></li><li><a href=https://donnol.github.io/posts/2023/10/wezterm/>Wezterm极简配置文件</a></li></ul></li><li><input type=checkbox id=section-e4a622c43fd57d7fdaea4a2f7de49a8d class=toggle>
<label for=section-e4a622c43fd57d7fdaea4a2f7de49a8d class="flex justify-between"><a role=button>09</a></label><ul><li><a href=https://donnol.github.io/posts/2023/09/%E9%9B%AA%E8%8A%B1id-%E6%97%B6%E9%92%9F%E5%9B%9E%E9%80%80%E9%97%AE%E9%A2%98/>雪花id的时钟回退问题</a></li><li><a href=https://donnol.github.io/posts/2023/09/go_escape_analysis/>Go escape analysis</a></li><li><a href=https://donnol.github.io/posts/2023/09/do/>What are you preparing to do?</a></li><li><a href=https://donnol.github.io/posts/2023/09/mysql/>查找并杀掉运行中事务</a></li><li><a href=https://donnol.github.io/posts/2023/09/goenv/>Vscode go cannot find GOROOT directory</a></li><li><a href=https://donnol.github.io/posts/2023/09/%E7%B3%BB%E7%BB%9F%E9%97%B4%E9%80%9A%E8%BF%87%E7%BD%91%E7%BB%9C%E4%BA%A4%E4%BA%92%E4%BB%A5%E5%AE%8C%E6%88%90%E4%BA%8B%E5%8A%A1/>不同系统之间通过网络对接</a></li><li><a href=https://donnol.github.io/posts/2023/09/your_life/>do</a></li><li><a href=https://donnol.github.io/posts/2023/09/go_empty_struct/>Go Empty Struct</a></li><li><a href=https://donnol.github.io/posts/2023/09/%E4%B8%BA%E4%BA%86%E4%BB%96%E6%98%AF%E8%87%AA%E5%B7%B1%E8%BD%AF%E5%BC%B1%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%9F%E5%8F%A3/>为了他是自己软弱的最大借口</a></li></ul></li><li><input type=checkbox id=section-8838f5d25b6f603e7c063d350b35a0d5 class=toggle>
<label for=section-8838f5d25b6f603e7c063d350b35a0d5 class="flex justify-between"><a role=button>07</a></label><ul><li><a href=https://donnol.github.io/posts/2023/07/jupyter/>Jupyter notebook</a></li><li><a href=https://donnol.github.io/posts/2023/07/vscode_traslate/>Vscode Translate</a></li><li><a href=https://donnol.github.io/posts/2023/07/windows_restart_remote_service/>Windows restart remote service</a></li><li><a href=https://donnol.github.io/posts/2023/07/error/>错误的定义和返回</a></li><li><a href=https://donnol.github.io/posts/2023/07/prometheus/>Prometheus start failed</a></li><li><a href=https://donnol.github.io/posts/2023/07/compare_order/>Compare and Order</a></li></ul></li><li><input type=checkbox id=section-74cf2507fef5fa65009db6bf308e9a1f class=toggle>
<label for=section-74cf2507fef5fa65009db6bf308e9a1f class="flex justify-between"><a role=button>06</a></label><ul><li><a href=https://donnol.github.io/posts/2023/06/sklearn/>ml sklearn</a></li><li><a href=https://donnol.github.io/posts/2023/06/route/>windows route</a></li><li><a href=https://donnol.github.io/posts/2023/06/wsl2/>wsl2初始化Mysql数据库速度非常慢</a></li></ul></li><li><input type=checkbox id=section-527b55105d8d0045f9ee6dadd1e05e12 class=toggle>
<label for=section-527b55105d8d0045f9ee6dadd1e05e12 class="flex justify-between"><a role=button>05</a></label><ul><li><a href=https://donnol.github.io/posts/2023/05/flutter_widget_element/>flutter Widget Element</a></li><li><a href=https://donnol.github.io/posts/2023/05/mysqlrouter/>mysqlrouter使用</a></li></ul></li><li><input type=checkbox id=section-ecc435df562a851b07184b1c1c4240b1 class=toggle checked>
<label for=section-ecc435df562a851b07184b1c1c4240b1 class="flex justify-between"><a role=button>04</a></label><ul><li><a href=https://donnol.github.io/posts/2023/04/nats/ class=active>NATS</a></li></ul></li><li><input type=checkbox id=section-375d37ccc725e9745ac2faf03a4499c2 class=toggle>
<label for=section-375d37ccc725e9745ac2faf03a4499c2 class="flex justify-between"><a role=button>01</a></label><ul><li><a href=https://donnol.github.io/posts/2023/01/go_generic_join/>Go Generic Join</a></li></ul></li><li><a href=https://donnol.github.io/posts/2023/11/go_template_dot/>Go Template Dot</a></li><li><a href=https://donnol.github.io/posts/2023/11/lllj/>Lllj</a></li><li><a href=https://donnol.github.io/posts/2023/11/%E4%B9%B0%E8%B5%8C%E6%8A%A2/>买赌抢</a></li><li><a href=https://donnol.github.io/posts/2023/11/%E5%90%91%E5%BE%80/>向往</a></li><li><a href=https://donnol.github.io/posts/2023/11/%E5%B1%95%E5%BC%80%E5%AE%8F%E4%BB%A5%E6%96%B9%E4%BE%BF%E9%98%85%E8%AF%BB/>展开宏以方便阅读</a></li><li><a href=https://donnol.github.io/posts/2023/11/%E7%90%86%E6%83%B3%E5%92%8C%E7%8E%B0%E5%AE%9E/>理想和现实</a></li></ul></li><li><input type=checkbox id=section-13b23314291792827d52ebbe811ebe4a class=toggle>
<label for=section-13b23314291792827d52ebbe811ebe4a class="flex justify-between"><a role=button>2022</a></label><ul><li><input type=checkbox id=section-be392bde2f802f04206051ce2326765b class=toggle>
<label for=section-be392bde2f802f04206051ce2326765b class="flex justify-between"><a role=button>12</a></label><ul></ul></li><li><input type=checkbox id=section-f87081d5433be20cb5c4724887670142 class=toggle>
<label for=section-f87081d5433be20cb5c4724887670142 class="flex justify-between"><a role=button>07</a></label><ul><li><a href=https://donnol.github.io/posts/2022/07/jump_table/>Jump Table</a></li><li><a href=https://donnol.github.io/posts/2022/07/number_calculate/>数字计算之分摊</a></li></ul></li><li><input type=checkbox id=section-be370e43a73b6a039cfd945ef9aa4dc7 class=toggle>
<label for=section-be370e43a73b6a039cfd945ef9aa4dc7 class="flex justify-between"><a role=button>05</a></label><ul><li><a href=https://donnol.github.io/posts/2022/05/generic/>泛型</a></li><li><a href=https://donnol.github.io/posts/2022/05/find_go_version_the_app_use/>Find out which Go version built your binary</a></li><li><a href=https://donnol.github.io/posts/2022/05/k8s_how_to_keep_pods/>k8s是怎么维持pod的运行的呢？</a></li><li><a href=https://donnol.github.io/posts/2022/05/go_enum/>Go enum</a></li></ul></li><li><input type=checkbox id=section-720d031152cdf3e533a2139eaa53eee6 class=toggle>
<label for=section-720d031152cdf3e533a2139eaa53eee6 class="flex justify-between"><a role=button>04</a></label><ul><li><a href=https://donnol.github.io/posts/2022/04/go1.18_comparable/>Go1.18 comparable</a></li></ul></li><li><input type=checkbox id=section-c034cabf3b8ad9fabf033690218e8ba2 class=toggle>
<label for=section-c034cabf3b8ad9fabf033690218e8ba2 class="flex justify-between"><a role=button>03</a></label><ul><li><a href=https://donnol.github.io/posts/2022/03/kmp/>KMP</a></li></ul></li><li><input type=checkbox id=section-21e005e3e03cd46d8214a804982b395b class=toggle>
<label for=section-21e005e3e03cd46d8214a804982b395b class="flex justify-between"><a role=button>02</a></label><ul><li><a href=https://donnol.github.io/posts/2022/02/%E9%9C%9C%E4%B9%8B%E5%93%80%E4%BC%A4/>霜之哀伤</a></li><li><a href=https://donnol.github.io/posts/2022/02/goroutine_vs_tokio/>goroutine vs tokio</a></li><li><a href=https://donnol.github.io/posts/2022/02/go_runtime_chan/>go runtime chan</a></li><li><a href=https://donnol.github.io/posts/2022/02/go_work/>go work</a></li><li><a href=https://donnol.github.io/posts/2022/02/distractions/>杂念</a></li></ul></li><li><input type=checkbox id=section-d12dcecc5bcd75c28d94c5b26097c574 class=toggle>
<label for=section-d12dcecc5bcd75c28d94c5b26097c574 class="flex justify-between"><a role=button>01</a></label><ul><li><a href=https://donnol.github.io/posts/2022/01/rust_safe/>Rust与安全</a></li><li><a href=https://donnol.github.io/posts/2022/01/wasmtime/>wasm运行时wasmtime</a></li><li><a href=https://donnol.github.io/posts/2022/01/container_encrypt/>容器镜像加密</a></li><li><a href=https://donnol.github.io/posts/2022/01/smart_contract/>智能合约</a></li><li><a href=https://donnol.github.io/posts/2022/01/learn_go_fast/>Go快速入门</a></li><li><a href=https://donnol.github.io/posts/2022/01/consensus/>consensus</a></li><li><a href=https://donnol.github.io/posts/2022/01/red_black_tree/>红黑树</a></li><li><a href=https://donnol.github.io/posts/2022/01/rust_commonly_used_crate/>Rust常用库</a></li><li><a href=https://donnol.github.io/posts/2022/01/cache/>缓存和数据库如何保持一致</a></li></ul></li></ul></li><li><input type=checkbox id=section-84bbf3dbf9679fbd75c1a04dbc15ba53 class=toggle>
<label for=section-84bbf3dbf9679fbd75c1a04dbc15ba53 class="flex justify-between"><a role=button>2021</a></label><ul><li><input type=checkbox id=section-906860f41f3d13df51bdd75562b6a53b class=toggle>
<label for=section-906860f41f3d13df51bdd75562b6a53b class="flex justify-between"><a role=button>12</a></label><ul><li><a href=https://donnol.github.io/posts/2021/12/ebpf/>ebpf</a></li><li><a href=https://donnol.github.io/posts/2021/12/time_wenzi/>时间和文字</a></li><li><a href=https://donnol.github.io/posts/2021/12/etcd/>etcd</a></li><li><a href=https://donnol.github.io/posts/2021/12/vscode-go-module/>vscode-go在go.mod在非根目录情况下失效的问题</a></li><li><a href=https://donnol.github.io/posts/2021/12/mqtt/>mqtt</a></li><li><a href=https://donnol.github.io/posts/2021/12/redis_sds/>redis sds</a></li><li><a href=https://donnol.github.io/posts/2021/12/k8s/>k8s</a></li><li><a href=https://donnol.github.io/posts/2021/12/ddia/>数据密集型应用设计</a></li><li><a href=https://donnol.github.io/posts/2021/12/burn_cpu_use_golang/>burn cpu use golang</a></li><li><a href=https://donnol.github.io/posts/2021/12/docker_compose_extra_host/>docker compose使用extra host让容器访问主机服务</a></li><li><a href=https://donnol.github.io/posts/2021/12/dbeaver/>数据库管理工具之dbeaver</a></li><li><a href=https://donnol.github.io/posts/2021/12/domain/>Domain-oriented development</a></li><li><a href=https://donnol.github.io/posts/2021/12/github_action_deploy_hugo_blog/>github action deploy hugo blog</a></li></ul></li><li><input type=checkbox id=section-17888aa71e14aa5ca2f4ffd47d1fbfe8 class=toggle>
<label for=section-17888aa71e14aa5ca2f4ffd47d1fbfe8 class="flex justify-between"><a role=button>07</a></label><ul><li><a href=https://donnol.github.io/posts/2021/07/linux-epoll/>linux epoll</a></li></ul></li><li><input type=checkbox id=section-97f1c934fce2a072bd4fb42288e67e01 class=toggle>
<label for=section-97f1c934fce2a072bd4fb42288e67e01 class="flex justify-between"><a role=button>01</a></label><ul><li><a href=https://donnol.github.io/posts/2021/01/proxy-between-layer/>Go实现AOP</a></li><li><a href=https://donnol.github.io/posts/2021/01/hugo-blog/>hugo搭建博客</a></li><li><a href=https://donnol.github.io/posts/2021/01/pstree/>pstree进程树及说明</a></li></ul></li></ul></li><li><input type=checkbox id=section-a40a6177600e1c6c6b80c2b7d293a317 class=toggle>
<label for=section-a40a6177600e1c6c6b80c2b7d293a317 class="flex justify-between"><a role=button>2020</a></label><ul><li><input type=checkbox id=section-b4bf87527d09276d38daa8e83ff01c07 class=toggle>
<label for=section-b4bf87527d09276d38daa8e83ff01c07 class="flex justify-between"><a role=button>12</a></label><ul><li><a href=https://donnol.github.io/posts/2020/12/go-ctx/>go ctx</a></li></ul></li></ul></li><li><input type=checkbox id=section-df6734adf28db90f3c5a7bda1b865da2 class=toggle>
<label for=section-df6734adf28db90f3c5a7bda1b865da2 class="flex justify-between"><a role=button>2024</a></label><ul><li><a href=https://donnol.github.io/posts/2024/01/gopls-hightlight-template/>Gopls Hightlight Template</a></li><li><a href=https://donnol.github.io/posts/2024/01/vscode%E9%80%89%E4%B8%AD%E6%89%80%E6%9C%89%E5%8C%B9%E9%85%8D%E9%A1%B9/>Vscode选中所有匹配项</a></li><li><a href=https://donnol.github.io/posts/2024/01/wsl2_config/>Wsl2 Config</a></li><li><a href=https://donnol.github.io/posts/2024/01/%E5%88%BA%E7%A0%B4/>刺破</a></li><li><a href=https://donnol.github.io/posts/2024/01/%E5%A5%BD%E5%9D%8F/>好坏</a></li><li><a href=https://donnol.github.io/posts/2024/01/%E6%A8%A1%E5%9D%97%E5%8C%96%E5%92%8C%E6%9C%8D%E5%8A%A1%E5%8C%96/>模块化和服务化</a></li><li><a href=https://donnol.github.io/posts/2024/01/%E7%AE%97%E6%95%B0/>算数</a></li><li><a href=https://donnol.github.io/posts/2024/01/%E8%BD%AC%E5%90%91/>转向</a></li><li><a href=https://donnol.github.io/posts/2024/01/%E8%BD%AF%E5%BC%B1/>软弱</a></li><li><a href=https://donnol.github.io/posts/2024/02/%E5%A8%81%E6%9C%9B/>威望</a></li><li><a href=https://donnol.github.io/posts/2024/02/%E6%8E%92%E5%88%97%E7%BB%84%E5%90%88/>排列组合</a></li><li><a href=https://donnol.github.io/posts/2024/02/%E7%89%A9%E6%9E%81%E5%BF%85%E5%8F%8D/>物极必反</a></li><li><a href=https://donnol.github.io/posts/2024/03/3.10/>3.10</a></li><li><a href=https://donnol.github.io/posts/2024/03/ffmpeg/>Ffmpeg</a></li><li><a href=https://donnol.github.io/posts/2024/03/match/>Match</a></li><li><a href=https://donnol.github.io/posts/2024/03/%E4%B8%83%E6%97%A5/>七日</a></li><li><a href=https://donnol.github.io/posts/2024/03/%E4%B8%AD%E5%86%9B%E4%B9%8B%E5%BF%97/>中军之志</a></li><li><a href=https://donnol.github.io/posts/2024/03/%E5%85%B1%E6%80%A7%E5%92%8C%E4%B8%AA%E6%80%A7/>共性和个性</a></li><li><a href=https://donnol.github.io/posts/2024/03/%E5%89%A5%E5%89%8A%E7%9A%84%E4%B8%A4%E6%9E%81/>剥削的两极</a></li><li><a href=https://donnol.github.io/posts/2024/03/%E6%8B%B3/>拳</a></li><li><a href=https://donnol.github.io/posts/2024/03/%E6%97%A2/>既</a></li><li><a href=https://donnol.github.io/posts/2024/03/%E8%8B%B1%E9%9B%84%E5%B0%8F%E5%85%B5/>英雄小兵</a></li><li><a href=https://donnol.github.io/posts/2024/03/%E8%B6%85%E8%B5%B6/>超赶</a></li><li><a href=https://donnol.github.io/posts/2024/04/oneline/>Oneline</a></li><li><a href=https://donnol.github.io/posts/2024/04/procfile/>Procfile</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E4%BA%B2%E7%96%8F%E4%B9%8B%E5%88%AB/>亲疏之别</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/>动态规划</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E5%A5%BD%E6%97%B6%E4%BB%A3/>好时代</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E5%B0%B1/>就</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E5%BB%BA%E8%AE%BE%E8%BF%98%E6%98%AF%E7%A0%B4%E5%9D%8F/>建设还是破坏</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E6%94%B6%E5%85%A5/>收入</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E6%97%A0%E7%A9%B7/>无穷</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E6%97%B6%E7%A9%BA%E4%BA%BA%E7%89%A9%E4%BA%8B/>时空人物事</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E6%B6%88%E9%81%A3/>消遣</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E6%BB%A1%E8%B6%B3/>满足</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E7%86%AC%E5%A4%9C%E6%89%93%E6%B8%B8%E6%88%8F/>熬夜打游戏</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E7%9F%A5%E8%AF%86-%E9%BB%84%E9%87%91-%E6%AD%A6%E5%99%A8/>知识 黄金 武器</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E7%A4%BE%E4%BC%9A/>社会</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E7%A8%B3/>稳</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E7%A9%BA%E9%A5%B7/>空饷</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E7%AE%A1%E7%90%86/>管理</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E7%BC%96%E5%AF%BC%E6%BC%94/>编导演</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E8%87%AA%E6%88%91%E8%B4%AC%E4%BD%8E/>自我贬低</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E8%8C%A7%E6%88%BF/>茧房</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E8%8E%BD%E7%AD%89%E5%86%B2/>莽等冲</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E8%AE%A4%E7%88%B6%E5%B0%81%E7%A5%9E/>认父封神</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E9%94%99%E8%AF%AF%E6%81%A2%E5%A4%8D-%E4%BA%89%E6%89%A7%E6%81%A2%E5%A4%8D/>错误恢复 争执恢复</a></li><li><a href=https://donnol.github.io/posts/2024/04/%E9%9A%8F%E7%BC%98/>随缘</a></li><li><a href=https://donnol.github.io/posts/2024/05/go-iter/>Go Iter</a></li><li><a href=https://donnol.github.io/posts/2024/05/%E5%8D%B7%E7%A7%AF/>卷积</a></li><li><a href=https://donnol.github.io/posts/2024/05/%E5%BC%BA%E5%BA%A6/>强度</a></li><li><a href=https://donnol.github.io/posts/2024/05/%E6%81%A9%E5%A8%81/>恩威</a></li><li><a href=https://donnol.github.io/posts/2024/05/%E6%9D%83%E5%88%A9/>权利</a></li><li><a href=https://donnol.github.io/posts/2024/05/%E6%B1%82%E5%AE%9E%E5%8A%A1%E8%99%9A/>求实务虚</a></li><li><a href=https://donnol.github.io/posts/2024/05/%E6%BC%A0%E8%A7%86/>漠视</a></li><li><a href=https://donnol.github.io/posts/2024/05/%E7%9F%9B%E7%9B%BE/>矛盾</a></li><li><a href=https://donnol.github.io/posts/2024/05/%E7%AE%80%E5%8C%96/>简化</a></li><li><a href=https://donnol.github.io/posts/2024/05/%E7%BB%9F%E6%B2%BB/>统治</a></li><li><a href=https://donnol.github.io/posts/2024/05/%E8%A1%8C/>行</a></li><li><a href=https://donnol.github.io/posts/2024/05/%E9%99%B7%E9%98%B1/>陷阱</a></li><li><a href=https://donnol.github.io/posts/2024/06/vscode-go-version/>Vscode Go Version</a></li><li><a href=https://donnol.github.io/posts/2024/06/%E5%B7%A5%E5%8E%82%E5%92%8C%E4%BD%9C%E5%9D%8A/>工厂和作坊</a></li><li><a href=https://donnol.github.io/posts/2024/06/%E5%BC%AF%E9%81%93%E8%B6%85%E8%BD%A6%E5%92%8C%E4%BC%BA%E6%9C%BA%E8%B6%85%E8%B6%8A/>弯道超车和伺机超越</a></li><li><a href=https://donnol.github.io/posts/2024/06/%E6%8E%A5%E5%8F%A3%E6%8A%BD%E8%B1%A1-%E5%AE%9E%E7%8E%B0%E5%88%86%E5%9D%97/>接口抽象 实现分块</a></li><li><a href=https://donnol.github.io/posts/2024/06/%E6%95%B0%E6%8D%AE%E5%92%8C%E7%BD%91%E7%BB%9C/>数据和网络</a></li><li><a href=https://donnol.github.io/posts/2024/06/%E6%9C%BA%E5%88%B6%E5%92%8C%E7%AD%96%E7%95%A5/>机制和策略</a></li><li><a href=https://donnol.github.io/posts/2024/06/%E6%9D%83%E8%B4%A3/>权责</a></li><li><a href=https://donnol.github.io/posts/2024/06/%E6%B0%B4%E5%9C%9F%E4%B8%8E%E4%BA%BA/>水土与人</a></li><li><a href=https://donnol.github.io/posts/2024/06/%E8%87%B4%E6%95%AC%E5%92%8C%E8%BF%BD%E9%9A%8F/>致敬和追随</a></li><li><a href=https://donnol.github.io/posts/2024/07/%E4%B8%93%E5%88%B6%E5%92%8C%E7%A7%91%E5%AD%A6/>专制和科学</a></li><li><a href=https://donnol.github.io/posts/2024/07/%E5%80%BC%E4%B8%8E%E4%B8%8D%E5%80%BC/>值与不值</a></li><li><a href=https://donnol.github.io/posts/2024/07/%E5%AE%9E%E4%BA%8B%E6%B1%82%E6%98%AF%E5%92%8C%E5%AF%BB%E6%A0%B9%E9%97%AE%E5%BA%95/>实事求是和寻根问底</a></li><li><a href=https://donnol.github.io/posts/2024/07/%E7%94%B3%E8%AF%B7%E4%BD%BF%E7%94%A8%E6%B8%85%E6%B4%97%E9%87%8A%E6%94%BE/>申请使用清洗释放</a></li><li><a href=https://donnol.github.io/posts/2024/08/go-error-check/>Go Error Check</a></li><li><a href=https://donnol.github.io/posts/2024/08/%E5%8D%8A%E7%9C%9F%E5%8D%8A%E5%81%87/>半真半假</a></li><li><a href=https://donnol.github.io/posts/2024/08/%E5%9B%BD%E5%AE%B6%E4%BC%9A%E5%87%BA%E6%89%8B/>国家会出手</a></li><li><a href=https://donnol.github.io/posts/2024/08/%E5%A5%89%E7%8C%AE%E7%89%BA%E7%89%B2%E5%BF%8D%E8%80%90%E4%BB%A3%E4%BB%B7/>奉献牺牲忍耐代价</a></li><li><a href=https://donnol.github.io/posts/2024/08/%E6%A8%A1%E5%9D%97%E5%8C%96-%E4%BE%9D%E8%B5%96/>模块化 依赖</a></li><li><a href=https://donnol.github.io/posts/2024/08/%E7%8E%AF%E5%A2%83%E4%B8%8E%E4%BA%BA%E7%89%A9/>环境与人物</a></li><li><a href=https://donnol.github.io/posts/2024/08/%E8%AE%BE%E8%AE%A1%E5%92%8C%E6%89%A7%E8%A1%8C/>设计和执行</a></li><li><a href=https://donnol.github.io/posts/2024/09/%E6%8E%A8%E6%BC%94/>推演</a></li><li><a href=https://donnol.github.io/posts/2024/09/%E7%89%B9%E6%9D%83%E6%91%A7%E6%AF%81%E8%A7%84%E7%9F%A9/>特权摧毁规矩</a></li><li><a href=https://donnol.github.io/posts/2024/09/%E8%87%AA%E7%84%B6%E8%A7%84%E5%BE%8B%E5%92%8C%E5%B8%82%E5%9C%BA%E8%A7%84%E5%BE%8B/>自然规律和市场规律</a></li></ul></li><li><a href=https://donnol.github.io/posts/aboutme/about-me/>关于我</a></li></ul><ul><li><a href=https://github.com/donnol/blog target=_blank rel=noopener>Github</a></li><li><a href=https://themes.gohugo.io/hugo-book/ target=_blank rel=noopener>Hugo Themes</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>NATS</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#是什么>是什么？</a><ul><li><a href=#基于主题>基于主题</a></li><li><a href=#发布-订阅>发布-订阅</a></li><li><a href=#请求-响应>请求-响应</a></li><li><a href=#queue-groups>Queue groups</a></li></ul></li><li><a href=#为什么>为什么？</a></li><li><a href=#qos>QOS</a></li><li><a href=#持久化>持久化</a></li><li><a href=#内嵌nats服务到应用里>内嵌NATS服务到应用里</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1><a href=/posts/2023/04/nats/>NATS</a></h1><h5>April 24, 2023</h5><div><a href=/categories/go/>Go</a>,
<a href=/categories/nats/>NATS</a></div><div><a href=/tags/nats/>NATS</a></div><h2 id=是什么>是什么？
<a class=anchor href=#%e6%98%af%e4%bb%80%e4%b9%88>#</a></h2><p><a href=https://nats.io/about/>Home</a>,
<a href=https://github.com/nats-io/nats-server>Github</a></p><blockquote><p>NATS 是一个简单、安全和高性能的通信系统，适用于数字系统、服务和设备。</p><p>NATS 是一种允许以消息形式分段的数据交换的基础架构。</p></blockquote><h3 id=基于主题>基于主题
<a class=anchor href=#%e5%9f%ba%e4%ba%8e%e4%b8%bb%e9%a2%98>#</a></h3><p>发布者将消息发到主题；订阅者订阅主题，在有消息到来时消费该消息。</p><blockquote><p>主题命名规则：</p><p>基本字符：a to z, A to Z and 0 to 9 (区分大小写，不能包含空白字符).</p><p>特殊字符: <code>.</code> (分割符，分割不同部分，每部分视为一个token)； * 和 > (通配符，*表示匹配一个token，>表示匹配一或多个token).</p><p>保留主题名称: 以 $ 开头的用在系统内部 (如：$SYS, $JS, $KV &mldr;)</p></blockquote><h3 id=发布-订阅>发布-订阅
<a class=anchor href=#%e5%8f%91%e5%b8%83-%e8%ae%a2%e9%98%85>#</a></h3><p>Core NATS: 一个主题，存在一个发布者，多个订阅者。</p><p>消息会<code>复制</code>到多个订阅者。</p><h3 id=请求-响应>请求-响应
<a class=anchor href=#%e8%af%b7%e6%b1%82-%e5%93%8d%e5%ba%94>#</a></h3><blockquote><p>A request is sent, and the application either waits on the response with a certain timeout, or receives a response asynchronously.</p><p>&ndash; 请求发出后，应用要不等待响应超时，要不就异步收到一个响应。</p></blockquote><p>TODO:</p><h3 id=queue-groups>Queue groups
<a class=anchor href=#queue-groups>#</a></h3><blockquote><p>if more subscribers are added to the same queue name, they become a queue group, and only one randomly chosen subscriber of the queue group will consume a message each time a message is received by the queue group.</p><p>如果多个订阅者被添加到同一个队列里，它们就成为一个队列组；当消息来时，只会随机选择一个订阅者来消费这条消息。</p></blockquote><p>消息生产后会由任意一个订阅者消费。(<code>分区</code>)</p><h2 id=为什么>为什么？
<a class=anchor href=#%e4%b8%ba%e4%bb%80%e4%b9%88>#</a></h2><h2 id=qos>QOS
<a class=anchor href=#qos>#</a></h2><blockquote><p>At most once QoS: Core NATS offers an at most once quality of service. If a subscriber is not listening on the subject (no subject match), or is not active when the message is sent, the message is not received. This is the same level of guarantee that TCP/IP provides. Core NATS is a fire-and-forget messaging system. It will only hold messages in memory and will never write messages directly to disk.
&ndash; 最多一次：如果订阅者没有监听subject，或者当消息被发送时不可用，它将接收不到该消息。这也是TCP/IP提供的同等保证。因为core NATS只会将消息存储在内存里，而不会存储到硬盘里。</p><p>At-least / exactly once QoS: If you need higher qualities of service (at least once and exactly once), or functionalities such as persistent streaming, de-coupled flow control, and Key/Value Store, you can use NATS JetStream, which is built in to the NATS server (but needs to be enabled). Of course, you can also always build additional reliability into your client applications yourself with proven and scalable reference designs such as acks and sequence numbers.
&ndash; 最少一次或刚好一次：使用JetStream模式。它会将消息存储到硬盘里，从而确保消息不会丢失。如果订阅者在消息发送时刚好离线了，在它恢复后，它将会继续消费该条消息。</p></blockquote><h2 id=持久化>持久化
<a class=anchor href=#%e6%8c%81%e4%b9%85%e5%8c%96>#</a></h2><p><code>jet stream</code>.</p><blockquote><p>JetStream was created to solve the problems identified with streaming in technology today - complexity, fragility, and a lack of scalability.
&ndash; 解决一些流的问题：复杂、碎片、扩展。</p></blockquote><h2 id=内嵌nats服务到应用里>内嵌NATS服务到应用里
<a class=anchor href=#%e5%86%85%e5%b5%8cnats%e6%9c%8d%e5%8a%a1%e5%88%b0%e5%ba%94%e7%94%a8%e9%87%8c>#</a></h2><p>单一进程里启动NATS服务。</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#是什么>是什么？</a><ul><li><a href=#基于主题>基于主题</a></li><li><a href=#发布-订阅>发布-订阅</a></li><li><a href=#请求-响应>请求-响应</a></li><li><a href=#queue-groups>Queue groups</a></li></ul></li><li><a href=#为什么>为什么？</a></li><li><a href=#qos>QOS</a></li><li><a href=#持久化>持久化</a></li><li><a href=#内嵌nats服务到应用里>内嵌NATS服务到应用里</a></li></ul></li></ul></nav></div></aside></main></body></html>